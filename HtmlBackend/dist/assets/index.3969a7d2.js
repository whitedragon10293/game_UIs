import{l as xt}from"./vendor.ad7a5cef.js";const Ot=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};Ot();let a;function Nt(){return a}function X(t){Dt(),a=xt(t),Ht()}function Dt(){a&&a.connected&&a.close()}function Ht(){a.on("REQ_PLAYER_INFO",d("onPlayerInfo")),a.on("REQ_TABLE_SETTINGS",d("onTableSettings")),a.on("REQ_PLAYER_STATE",d("onPlayerState")),a.on("REQ_TABLE_STATUS",d("onTableStatus")),a.on("REQ_TABLE_SIDEPOTS",d("onTableSidePots")),a.on("REQ_TABLE_TURN",d("onTableTurn")),a.on("REQ_TABLE_ROUNDRESULT",d("onTableRoundResult")),a.on("REQ_TABLE_PLAYERSHOWCARDS",d("onTablePlayerShowCards")),a.on("REQ_PLAYER_LEAVE",d("onPlayerLeave")),a.on("connect",d("onConnect")),a.on("disconnect",d("OnDisconnect"))}const P={onPlayerInfo:[],onTableSettings:[],onPlayerState:[],onTableStatus:[],onTableSidePots:[],onTableTurn:[],onTableRoundResult:[],onTablePlayerShowCards:[],onPlayerLeave:[],onConnect:[]};function Wt(t,e){if(console.log(`EventName: ${t}
Data:`),console.log(e),!!P[t]){try{e=JSON.parse(e)}catch{}P[t].forEach(n=>{n(e)})}}function d(t){return e=>{Wt(t,e)}}function u(t,e){if(P[t]||(P[t]=[]),typeof e!="function")throw"The callback should be a function";P[t].push(e)}function H(t,e){a.emit(t,e)}function Qt(t,e){a.emit("REQ_PLAYER_ENTER",{user:t,user_token:t,thread:t,table:e,table_token:e})}function Ft(t){a.emit("REQ_PLAYER_SITDOWN",{seat:t})}function Mt(t,e){e||(e=!1),a.emit("REQ_PLAYER_BUYIN",{amount:t,autoTopUp:e})}function Yt(t,e){console.log({action:t,bet:e}),a.emit("REQ_PLAYER_ACTION",{action:t,bet:e})}const V="https://nrpoker.net";async function Jt(t){return new Promise((e,n)=>{const i=new XMLHttpRequest;i.onreadystatechange=function(){this.readyState==4&&(this.status==200?e(this.response):n(this.response))},i.open("GET",`${V}/${t}`,!0),i.send()})}async function jt(t,e){return new Promise((n,i)=>{const o=new XMLHttpRequest;o.onreadystatechange=function(){this.readyState==4&&(this.status==200?n(this.response):i(this.response))},o.open("POST",`${V}/${t}`,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(e))})}const Z=Object.freeze({None:0,Leaving:1,Joining:2,SitOut:3,Waiting:4,Playing:5});Object.freeze({Empty:0,Joining:1,SitOut:2,Waiting:3,Playing:4});Object.freeze({None:0,HoleCards:1,Flop:2,Turn:3,River:4,Showdown:5,End:6});Object.freeze({None:0,HighCard:1,Pair:2,TwoPair:3,ThreeOfAKind:4,Straight:5,Flush:6,FullHouse:7,FourOfAKind:8,StraightFlush:9});class tt{constructor(e,n,i,o){this.name=e,this.avatar=n,this.cash=i,this.chips=o}}class Ut{constructor(e,n,i,o,r,l,S,T,v,D,kt,It){this.name=e,this.numberOfSeats=n,this.mode=i,this.level=o,this.nextSB=r,this.nextBB=l,this.duration=S,this.smallBlind=T,this.bigBlind=v,this.ante=D,this.minByIn=kt,this.maxByIn=It}}class zt{constructor(e,n,i,o,r,l,S,T,v,D){this.breakTime=e,this.paused=n,this.round=i,this.state=o,this.cards=r,this.seatOfDealer=l,this.seatOfSmallBlind=S,this.seatOfBigBlind=T,this.pot=v,this.turn=D}}class Kt{constructor(e,n,i,o,r,l,S,T,v){e||(e=-1),this.seat=e,this.pot=n,this.call=i,this.canRaise=o,this.minRaise=r,this.maxRaise=l,this.timeout=S,this.timeToReact=T,this.timeBank=v}get canCheck(){return this.call==0}get canCall(){return this.call>0}}class qt{constructor(e,n){this.players=e,this.pots=n}get lestPlayers(){return this.players.filter(e=>!e.fold)}get winners(){return this.players.filter(e=>e.prize>0)}}class Gt{constructor(e,n){this.seat=e,this.cards=n}}const W=new tt,Q=new Ut,B=new zt,s=new Kt;let C=Z.None,E=-1;function _(){return E}function et(){const t=B.seats[E];return t?t.money:0}function Xt(t){C=Z.None,E=-1,f("onPlayerLeave",t)}function Vt(t){k(t,W),f("onPlayerInfo",W)}function Zt(t){C=t.state,f("onPlayerState",C)}function te(t){k(t,Q),f("onTableSettings",Q)}function ee(t){k(t,B),E=t.seats.findIndex(e=>e.player&&e.player.name==W.name),B.seats.map(e=>`${e.state}(${e.player?e.player.name:""})`),f("onTableStatus",B),f("onTurnChange",B.turn==E)}function ne(t){f("onSidePots",t)}function oe(t){k(t,s),s.seat==null&&(s.seat=-1),s.seat>=0?(s.canRaise?(s.minRaise=s.raise[0],s.maxRaise=s.raise[1]):(s.minRaise=0,s.maxRaise=0),s.timeout=s.time[0],s.timeToReact=s.time[1],s.timeBank=s.time[2]):(s.call=0,s.canRaise=!1,s.minRaise=0,s.maxRaise=0,s.timeout=0,s.timeToReact=0,s.timeBank=0),f("onRoundTurn",s)}function A(t,e=0){isNaN(e)&&(e=0),Yt(t,e)}function ie(t){let e=new qt(t.players,t.pots);f("onRoundResult",e)}function se(t){const e=new Gt(t.seat,t.cards);f("onShowCards",e)}function ae(t=!0){H("REQ_PLAYER_WAITFORBB",{value:t})}function re(t=!0){H("REQ_PLAYER_SITOUTNEXTHAND",{value:t})}function ce(){H("REQ_PLAYER_SITIN")}function nt(t){C!="Playing"&&Ft(t)}u("onPlayerLeave",Xt);u("onPlayerInfo",Vt);u("onTableSettings",te);u("onPlayerState",Zt);u("onTableStatus",ee);u("onTableSidePots",ne);u("onTableTurn",oe);u("onTableRoundResult",ie);u("onTablePlayerShowCards",se);function k(t,e){for(const n in t)e[n]=t[n]}const R={};function f(t,e){if(!!R[t]){try{e=JSON.parse(e)}catch{}R[t].forEach(n=>{n(e)})}}function h(t,e){if(R[t]||(R[t]=[]),typeof e!="function")throw"The callback should be a function";R[t].push(e)}window.sitDown=nt;$(".menu_wrapper a")[0];const ot=$("#buy_in_div")[0],I=$("#buyInInput")[0],le=$("#buyInButton")[0],F=$("#back-button")[0],it=$("#waitForBBDiv")[0],st=$("#waitForBBCheckbox")[0],at=$("#sitOutNextHandDiv")[0],rt=$("#sitOutNextHandCheckbox")[0];le.addEventListener("click",()=>{Mt(+I.value)});F.addEventListener("click",ce);st.addEventListener("change",()=>{ae(st.checked)});rt.addEventListener("change",()=>{re(rt.checked)});function ue(t){I.min=t.minBuyIn,I.max=t.maxBuyIn,I.value=t.minBuyIn}function de(t){switch(y(F,!1),y(ot,!1),y(it,!1),y(at,!1),t){case"SitOut":y(F,!0);break;case"Joining":Q.mode=="cash"&&y(ot,!0);break;case"Waiting":y(it,!0);break;case"Playing":y(at,!0);break}}function y(t,e){t.style.visibility=e==!1?"hidden":"visible"}h("onTableSettings",ue);h("onPlayerState",de);const fe=`
<div class="avtar_img">
    <img src="./images/avtar.png">
    <div class = "cards-container">
        <canvas><canvas>
    </div>
</div>
<div class="title">Tangotag</div>
<div class="price">$5.24</div>
<div class="raise action">RAISE</div>
<img class="blind">
<div class="bottom_price"><img src="./images/cicle.png"> <span>$55</span></div>
<div class="winner"> <img src="./images/WINNER.png"></div>
`,he='<button class="sit_down_button">Sit Down</button>',pe="./images/SB.png",be="./images/BB.png",ye="./images/D.png",me=5;let ct=-1;const c=ge();Se();function ge(){return $(".player_wrapper").sort((e,n)=>e.classList[1]==null||n.classList[1]==null?0:+e.classList[1]-+n.classList[1])}function we(t,e){const n=c.slice(),i=(e-t+c.length)%c.length;for(let o=0;o<c.length;o++)c[o]=n[(o+i)%c.length]}function Se(){bt()}function p(t,e,n){typeof t=="number"&&(t=c[t]);const i=`.${e}`;let o=$(t).find(i)[0];if(!!o){if(n===void 0||n===!1){o.style.visibility="hidden";return}o.style.visibility="visible",n!==!0&&(e=="bottom_price"?o=$(o).find("span")[0]:e=="avtar_img"&&(o=$(o).find("img")[0]),o.tagName.toLowerCase()=="img"?o.src=n:o.innerText=n)}}function lt(t,e){const n=c[e];n.innerHTML=fe,ut(e,t.name),Y(e,t.chips),pt(e,t.avatar)}function Te(){for(let t=0;t<c.length;t++){const e=new tt(t,"./images/avtar.png",0,t);lt(e,t)}}function M(t){const e=c[t];return $(e).find(".cards-container canvas")[0]}function ve(){return c.length}function ut(t,e){p(t,"title",e)}function Y(t,e){p(t,"price",`$${e}`)}function dt(t,e){let n=e?`$${e}`:!1;p(t,"bottom_price",n)}function ft(t,e){p(t,"action",e?e.toUpperCase():!1)}function Pe(t,e){p(t,"winner",e)}function ht(t,e,n){for(const i of c)p(i,"blind",!1);p(t,"blind",pe),p(e,"blind",be),p(n,"blind",ye)}function pt(t,e){p(t,"avtar_img",e)}function bt(){for(let t=0;t<c.length;t++){const e=c[t];e.innerHTML=he,e.seatIndex=t,$(e).find(".sit_down_button")[0].addEventListener("click",()=>{nt(e.seatIndex)})}_()!=-1&&Be()}function Be(){const t=$(".sit_down_button");for(const e of t)e.style.visibility="hidden"}function $e(t){bt(),_()!=ct&&(we(_(),me),ct=_());for(let e=0;e<t.seats.length;e++){const n=t.seats[e];n.state!="Empty"&&(lt(n.player,e),ft(e,n.lastAction),dt(e,n.lastBet),Y(e,n.money))}ht(t.seatOfSmallBlind,t.seatOfBigBlind,t.seatOfDealer)}h("onTableStatus",$e);window.showPlayerName=ut;window.showPlayerMoney=Y;window.showPlayerBet=dt;window.showPlayerAction=ft;window.showPlayerWinner=Pe;window.showBlinds=ht;window.showPlayerAvatar=pt;window.makeMocupPlayers=Te;const Ee=$(".totalpost span")[0],Re=$(".center_div .bottom_price")[0],yt=$(".center_div")[0],Le=$("#smallBlindSpan")[0],Ce=$("#bigBlindSpan")[0],_e=$("#anteSpan")[0],Ae=$("#levelSpan")[0],ke=$(".tournament_only")[0];Ie();function Ie(){J(0),yt.style.visibility="hidden",Re.style.visibility="hidden"}function J(t){Ee.innerText=`$${t}`}function xe(t){J(t.pot)}function Oe(t){yt.style.visibility="visible",Le.innerText=t.smallBlind,Ce.innerText=t.bigBlind,_e.innerText=t.ante,Ae.innerText=t.level,ke.style.visibility=t.mode=="tournament"?"visible":"hidden"}h("onTableStatus",xe);h("onTableSettings",Oe);window.setTotalPot=J;const Ne=$("#fold-button")[0],mt=$("#call-button")[0],De=$("#bet-button")[0],He=$("#bet-button div")[0],gt=$(".bottom_buttons_Wrapper")[0],We=$("#back-button")[0],b=$("#bet-input")[0],Qe=$("#all-in-button")[0],Fe=$("#4x-button")[0],Me=$("#3x-button")[0],Ye=$("#2_5x-button")[0],Je=$(".control-minus")[0],je=$(".control-plus")[0],j=$("#myDIV")[0];let x=0,U=1,O=0;Ne.addEventListener("click",qe);mt.addEventListener("click",Ve);De.addEventListener("click",Ze);b.addEventListener("change",Ke);Qe.addEventListener("click",ze);Fe.addEventListener("click",()=>m(O*2/3));Me.addEventListener("click",()=>m(O*1/2));Ye.addEventListener("click",()=>m(O*1/3));je.addEventListener("click",()=>m(+b.value+U));Je.addEventListener("click",()=>m(+b.value-U));Ue();function Ue(){z(We,!1),z(gt,!1),q(0)}function z(t,e){t.style.visibility=e==!1?"hidden":"visible"}function K(t,e){t.style.display=e==!1?"none":"block"}function m(t){b.value=t,He.innerHTML=`$${t}`}function ze(){m(et())}function Ke(){console.log(b.value)}function qe(){K(j,!1),A("fold")}function Ge(){A("bet",x)}function Xe(){A("bet",0)}function Ve(){K(j,!1),x==0?Xe():Ge()}function Ze(){A("bet",+b.value)}function q(t=0){x=+t,mt.innerHTML=x==0?"CHECK":"CALL"}function wt(t){b.max=et(),z(gt,t),K(j,t)}function tn(t){t.bigBlind&&(U=t.bigBlind)}function en(t){t.call!=null&&(q(t.call),b.min=t.call,m(b.value))}function nn(t){O=t.pot}h("onTurnChange",wt);h("onTableSettings",tn);h("onRoundTurn",en);h("onTableStatus",nn);window.updateCallAmount=q;window.setActiveActionButtons=wt;const St=$("#fourColorsCheckbox")[0];St.addEventListener("change",()=>{Lt(St.checked)});let Tt=!1;const vt=[],g={cardWidth:102,cardHeight:142},N=$("#main-cards-canvas")[0],Pt=N.getContext("2d");function on(){Bt(),N.width=g.cardWidth*5,N.height=g.cardHeight;for(let t=0;t<ve();t++){const e=M(t);!e||(e.width=g.cardWidth*4,e.height=g.cardHeight)}}function Bt(){const t=["s","c","d","h"],e=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],n=(i,o)=>{const r=new Image;let l=o+i;vt[l.toLowerCase()]=r,Tt&&(i=="c"||i=="d")&&(l+="1"),r.src=`./images/png/102x142/${l}.png`};for(const i of t)for(const o of e)n(i,o)}function sn(t){let e=t.toUpperCase();return e=e.replace("T","10"),vt[e.toLowerCase()]}function $t(t,e,n){if(t=="?")return;typeof n=="number"&&(n=M(n));const i=n?n.getContext("2d"):Pt,o=e*g.cardWidth;i.drawImage(sn(t),o,0,g.cardWidth,g.cardHeight)}function Et(t,e){if(Rt(e),!!t)for(let n=0;n<t.length;n++)$t(t[n],n,e)}function Rt(t){typeof t=="number"&&(t=M(t));const e=t?t.getContext("2d"):Pt;t||(t=N),e.clearRect(0,0,t.width,t.height)}function Lt(t){Tt=t,Bt()}function an(t){Et(t.cards);for(let e=0;e<t.seats.length;e++){const n=t.seats[e];n&&n.state!="Empty"&&n.cards&&Et(n.cards,e)}}on();h("onTableStatus",an);window.drawCard=$t;window.clearCanvas=Rt;window.setFourColors=Lt;let L=_t(),w;Ct().catch(t=>{console.error(t)});u("onConnect",cn);u("onDisconnect",Ct);async function Ct(){if(L){if(await At(L),!w.status)throw w.message;X(w.server)}else rn(G("u"),G("p"))}function _t(){return G("t")}function G(t){const e=window.location.href.match(`${t}=([^&]+)`);if(e)return e[1]}async function rn(t,e){if(!t)throw"No user ID";if(!e)throw"No password";let n=await jt("api/users/authenticate",{username:t,password:e});return n=JSON.parse(n),L=n.token,await At(L),X(w.server),n}async function At(t){let e=await Jt(`Api/get_ts/${t}`);return e=JSON.parse(e),w=e,console.log(w),e}function cn(){Qt(L,w.token)}window.getParamToken=_t;u("onConnect",()=>{window.socket=Nt()});
